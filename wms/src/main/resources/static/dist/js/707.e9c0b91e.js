"use strict";(self["webpackChunkwms_web"]=self["webpackChunkwms_web"]||[]).push([[707],{6707:function(e,t,s){s.r(t),s.d(t,{default:function(){return m}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"loginBody"},[t("div",{staticClass:"loginDiv"},[t("div",{staticClass:"login-content"},[t("h1",{staticStyle:{"text-align":"center"}},[e._v("仓库管理系统")]),t("h2",{staticClass:"login-title"},[e._v("用户登录")]),t("el-form",{ref:"loginForm",attrs:{model:e.loginForm,"label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"账号",prop:"no"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"text",autocomplete:"off",size:"small","prefix-icon":"el-icon-s-custom"},model:{value:e.loginForm.no,callback:function(t){e.$set(e.loginForm,"no",t)},expression:"loginForm.no"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{type:"password","show-password":"",autocomplete:"off",size:"small","prefix-icon":"el-icon-lock"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirm.apply(null,arguments)}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",{staticStyle:{"margin-left":"30px"}},[t("el-button",{attrs:{type:"primary",disabled:e.confirm_disabled},on:{click:e.confirm}},[e._v("登 录")]),t("el-button",{attrs:{type:"primary",disabled:e.confirm_disabled},on:{click:e.resetForm}},[e._v("重 置")])],1)],1)],1)])])},r=[],i={name:"Login",data(){return{confirm_disabled:!1,loginForm:{no:"",password:""},rules:{no:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输密码",trigger:"blur"}]}}},methods:{resetForm(){this.$refs.loginForm.resetFields()},confirm(){this.confirm_disabled=!0,this.$refs.loginForm.validate((e=>{if(!e)return this.confirm_disabled=!1,this.$message.error("校验失败"),!1;this.$axios.post("/user/login",this.loginForm).then((e=>{if(console.log(e),200!==e.data.code)return this.confirm_disabled=!1,this.$message.error(e.data.msg),!1;{this.$message({message:"登录成功！",type:"success"}),sessionStorage.setItem("CurUser",JSON.stringify(e.data.data.user)),console.log(e.data.data.menu),this.$store.commit("setMenu",e.data.data.menu);const t=e.headers["authorization"],s=e.data.data.user;console.log(s),this.$store.commit("SET_TOKEN",t),this.$store.commit("SET_USERINFO",s),console.log(this.$store.getters.getUser),this.$router.replace("/Index")}}))}))}}},l=i,a=s(1001),n=(0,a.Z)(l,o,r,!1,null,"088fa0a6",null),m=n.exports}}]);
//# sourceMappingURL=707.e9c0b91e.js.map