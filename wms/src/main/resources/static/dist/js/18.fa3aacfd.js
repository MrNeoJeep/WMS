"use strict";(self["webpackChunkwms_web"]=self["webpackChunkwms_web"]||[]).push([[18],{1018:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var o=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{"margin-bottom":"5px"}},[t("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入物品名","suffix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loadPost.apply(null,arguments)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"请选择仓库"},model:{value:e.storage,callback:function(t){e.storage=t},expression:"storage"}},e._l(e.storageData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"请选择分类"},model:{value:e.goodsType,callback:function(t){e.goodsType=t},expression:"goodsType"}},e._l(e.goodsTypeData,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),t("el-button",{staticStyle:{"margin-left":"5px"},attrs:{type:"primary"},on:{click:e.loadPost}},[e._v("查询")]),t("el-button",{attrs:{type:"success"},on:{click:e.resetParam}},[e._v("重置")])],1),t("el-table",{attrs:{data:e.tableData,"header-cell-style":{background:"#f2f5fc",color:"#555555"},border:""}},[t("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),t("el-table-column",{attrs:{prop:"goodsname",label:"物品名",width:"180"}}),t("el-table-column",{attrs:{prop:"storagename",label:"仓库",width:"180"}}),t("el-table-column",{attrs:{prop:"goodstypename",label:"分类",width:"180"}}),t("el-table-column",{attrs:{prop:"adminname",label:"操作人",width:"180"}}),t("el-table-column",{attrs:{prop:"username",label:"申请人",width:"180"}}),t("el-table-column",{attrs:{prop:"count",label:"数量",width:"180"}}),t("el-table-column",{attrs:{prop:"createtime",label:"操作时间",width:"180"}}),t("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1),t("el-pagination",{attrs:{"current-page":e.pageNum,"page-sizes":[5,10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],s={name:"RecordManage",data(){return{user:JSON.parse(sessionStorage.getItem("CurUser")),storageData:[],goodsTypeData:[],tableData:[],pageSize:10,pageNum:1,total:0,name:"",storage:"",goodsType:"",centerDialogVisible:!1,form:{id:"",name:"",storage:"",goodsType:"",count:"",remark:""}}},methods:{formatStorage(e){let t=this.storageData.find((t=>t.id==e.storage));return t&&t.name},formatGoodsType(e){let t=this.goodsTypeData.find((t=>t.id==e.goodsType));return t&&t.name},resetForm(){this.$refs.form.resetFields()},handleSizeChange(e){console.log(`每页 ${e} 条`),this.pageNum=1,this.pageSize=e,this.loadPost()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.pageNum=e,this.loadPost()},resetParam(){this.name="",this.storage="",this.goodsType=""},loadStorage(){this.$axios.get("/storage/list",{headers:{Authorization:localStorage.getItem("token")}}).then((e=>e.data)).then((e=>{console.log(e),200==e.code?this.storageData=e.data:alert("获取数据失败")}))},loadGoodsType(){this.$axios.get("/goodstype/list",{headers:{Authorization:localStorage.getItem("token")}}).then((e=>e.data)).then((e=>{console.log(e),200==e.code?this.goodsTypeData=e.data:alert("获取数据失败")}))},loadPost(){this.$axios.post("/record/listPage",{pageSize:this.pageSize,pageNum:this.pageNum,param:{name:this.name,goodsType:this.goodsType+"",storage:this.storage+"",roleId:this.user.roleId+"",userId:this.user.id+""}},{headers:{Authorization:localStorage.getItem("token")}}).then((e=>e.data)).then((e=>{console.log(e),200==e.code?(this.tableData=e.data,this.total=e.total):alert("获取数据失败")}))}},beforeMount(){this.loadStorage(),this.loadGoodsType(),this.loadPost()}},r=s,n=a(1001),i=(0,n.Z)(r,o,l,!1,null,"ecd99aca",null),d=i.exports}}]);
//# sourceMappingURL=18.fa3aacfd.js.map